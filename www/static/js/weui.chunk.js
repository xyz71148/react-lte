(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{26:function(e,t,n){"use strict";var a=n(3),o=n(4),r=n(6),i=n(5),c=n(7),l=n(0),s=n.n(l),u=n(23),d=n.n(u),m=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(i.a)(t).call(this,e))).el=document.createElement("div"),n.container_id=e.id?e.id:"main-content",e.onScroll&&(n.el.onscroll=e.onScroll),e.className?n.el.className=e.className:n.el.className="portal",n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.getElementById(this.container_id).appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.getElementById(this.container_id).removeChild(this.el)}},{key:"render",value:function(){return d.a.createPortal(this.props.children,this.el)}}]),t}(s.a.Component);t.a=m},31:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(2),i=n(26),c=n(32),l=(n(48),n(22)),s=n(8),u=Object(r.b)(function(e){var t=e.route;return{go_1:t.go_1,pages_history:t.pages_history}})(function(e){var t=e.children,n=e.go_1,a=e.topGlobal,r=e.className,u=e.pages_history,d=e.id,m=e.title,p=e.showHeader,f=e.visible,h=e.onClose,g=e.onConfirm,v=e.onAdd;if(!d)return null;var b=d.replace(/-/g,"_").replace(/\//g,"_"),w=Object(c.a)({topGlobal:a,page:!0,slideIn:(!f||!n)&&f,slideOut:window.page_close_id&&b===window.page_close_id});function _(e){var t=document.body;window.is_scroll_end=t.offsetHeight+t.scrollTop===t.scrollHeight,console.log(window.is_scroll_end,t.offsetHeight,t.scrollTop,t.scrollHeight)}return a&&f&&Object(s.b)(),window.document.body.onscroll=_,f?o.a.createElement(i.a,{className:r||"portal",onScroll:function(e){_()}},o.a.createElement("div",{className:w,onAnimationEnd:function(){window.page_close_id&&window.page_close_id===b&&(window.page_close_id=null,0===u.length?window.location.href="#":window.history.go(-1)),document.querySelector("#page_"+b).className=a?"topGlobal page":"page"},id:"page_"+b},p&&o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"left"},h&&o.a.createElement("div",{className:"icon",onClick:function(e){e.target;h()}},o.a.createElement(l.e,{size:"1.8em"}))),o.a.createElement("div",{className:"title"},m),o.a.createElement("div",{className:"right"},g&&o.a.createElement("div",{className:"icon",onClick:function(){g()}},o.a.createElement(l.d,{size:"1.8em"})),v&&o.a.createElement("div",{className:"icon",onClick:function(){v()}},o.a.createElement(l.b,{size:"1.8em"})))),o.a.createElement("div",{className:"body"},t,"android"===Object(s.h)()&&o.a.createElement("div",{style:{height:60}})))):null});t.a=u},32:function(e,t,n){"use strict";var a={}.hasOwnProperty;t.a=function e(){for(var t=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var r=typeof o;if("string"===r||"number"===r)t.push(o);else if(Array.isArray(o))t.push(e.apply(null,o));else if("object"===r)for(var i in o)a.call(o,i)&&o[i]&&t.push(i)}}return t.join(" ")}},36:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(9),o="route",r={page:{},index:!0,page_close_id:null,pages_history:[],go_1:!1,page_id:"index"};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0,n=e.keys;switch(t.type){case o+"/setState":case o+"/onClosePage":return Object(a.a)({},e,t.payload);case o+"/hidePage":var i=n.pop();console.log("hidePage",i,n);var c={};return c[i]={visible:!1,id:i},Object(a.a)({},e,{page:Object(a.a)({},e.page,c),page_close_id:null,index:!0,keys:n});case o+"/showPage":var l=t.payload.id,s={};return console.log("showPage",n,l),s[l]=Object(a.a)({visible:!0,id:l},t.payload),Object(a.a)({},e,{page:Object(a.a)({},e.page,s),page_close_id:null,index:!1,keys:n});default:return e}}},37:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(9),o={loading:!0,access_token:null,constant:null};function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/setState":case"app/logged":return Object(a.a)({},e,t.payload);default:return e}}},38:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(13),o=n.n(a),r=n(8),i=function(){c()},c=function(){o.a.defaults.timeout=15e3,o.a.interceptors.request.use(function(e){var t=e.url,n=window.globalObject.base_api_url;return t&&0===t.indexOf("http")?e.url="".concat(t):e.url="".concat(n).concat(t),e},function(e){return console.error("request",e),Promise.reject(e)}),o.a.interceptors.response.use(function(e){return e.data&&e.data.code&&403===e.data.code?weui.alert("\u6ca1\u6709\u6743\u9650"):e},function(e){return console.error("response",e.message),e.message.indexOf("401")>0||e.response&&401===e.response.status?(localStorage.removeItem("access_token"),weui.alert("\u8bf7\u5148\u767b\u9646",function(){return Object(r.j)()})):Promise.reject(e)})}},39:function(e,t,n){"use strict";n.d(t,"a",function(){return a});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},414:function(e,t,n){e.exports=n(419)},415:function(e,t,n){},419:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(23),i=n.n(r),c=n(24),l=n(37),s=n(36),u=Object(c.c)({app:l.a,route:s.a}),d=n(45),m=n(2),p=n(38),f=n(39),h=n(9),g=n(3),v=n(4),b=n(6),w=n(5),_=n(7),y=n(8),j=(n(47),n(31)),O=(n(415),n(22)),E=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(o)))).state={star_css:"star_off",tipTxt:null},n}return Object(_.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.app_loading;return console.log(e),o.a.createElement("div",{className:"Home"},o.a.createElement("div",{className:"tabbar"},o.a.createElement("div",{className:"page__bd",style:{height:"100%"}},o.a.createElement("div",{className:"weui-tab"},o.a.createElement("div",{className:"weui-tab__panel"},o.a.createElement("div",{className:"tabbar_body"},"dd")),o.a.createElement("div",{className:"weui-tabbar"},o.a.createElement("div",{className:"weui-tabbar__item weui-bar__item_on",onClick:function(){alert(11)}},o.a.createElement("div",null,o.a.createElement(O.b,{className:"weui-tabbar__icon"})),o.a.createElement("p",{className:"weui-tabbar__label"},"\u5fae\u4fe1")),o.a.createElement("div",{className:"weui-tabbar__item"},o.a.createElement("div",null,o.a.createElement(O.d,{className:"weui-tabbar__icon"})),o.a.createElement("p",{className:"weui-tabbar__label"},"\u901a\u8baf\u5f55")),o.a.createElement("div",{className:"weui-tabbar__item"},o.a.createElement("div",null,o.a.createElement(O.e,{className:"weui-tabbar__icon"})),o.a.createElement("p",{className:"weui-tabbar__label"},"\u53d1\u73b0")),o.a.createElement("div",{className:"weui-tabbar__item"},o.a.createElement("div",null,o.a.createElement(O.g,{className:"weui-tabbar__icon"})),o.a.createElement("p",{className:"weui-tabbar__label"},"\u6211")))))))}}]),t}(a.Component),N=Object(m.b)(function(e){return{app_loading:e.app.loading}})(E),k={home:{children:o.a.createElement(N,null)},404:{children:o.a.createElement("div",null,o.a.createElement("h1",null,"404"))}},C=[],A=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(b.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!0},n}return Object(_.a)(t,e),Object(v.a)(t,[{key:"handlePageId",value:function(e){var t="404",n=e.hash.replace("#","");n.indexOf("?")&&(window.urlQuery=Object(y.m)(n).query,n=n.split("?")[0]),t=0===n.length?"home":Object.keys(k).includes(n)?n:"404";var a=window.pages_history.length;return a>0&&window.pages_history[a-1]===t?(console.log("go -1"),window.go_1=!0):(window.go_1=!1,window.pages_history.push(t)),this.props.dispatch({type:"route/setState",payload:{page_id:t,pages_history:window.pages_history,go_1:window.go_1}}),t}},{key:"handleUrl",value:function(e){var t=Object(y.m)(e);if(window.urlObject=t,console.log(t),t.query.jwt)Object(y.o)("JWT "+t.query.jwt),this.props.dispatch({type:"app/logged",payload:{access_token:"JWT "+t.query.jwt}}),window.location.href="".concat(t.protocol,"//").concat(t.host).concat(t.pathname).concat(t.hash);else{var n=this.handlePageId(t),a=Object(y.g)();a&&this.props.dispatch({type:"app/logged",payload:{access_token:a}}),C.includes(n.split("/")[0])&&null===a?Object(y.j)():this.finishLoading()}}},{key:"finishLoading",value:function(){this.setState({loading:!1}),setTimeout(function(){document.querySelector(".global-loading").style.display="none"},700)}},{key:"componentDidMount",value:function(){var e=this;window.onpopstate=function(){var t=Object(y.m)(document.location);console.log("onpopstate"),e.handleUrl(t)},this.handleUrl(window.location.href)}},{key:"getPageProps",value:function(e,t){var n=this.props,a=n.page,o=n.page_id,r=!0;"home"===e&&(r=!1);var i=Object(h.a)({visible:o===e,id:e,showHeader:r},t);return a&&a[e]?Object(h.a)({},i,a[e],t,{visible:o===e}):i}},{key:"render",value:function(){var e=this;return this.state.loading?null:o.a.createElement("div",{className:"App"},Object.keys(k).map(function(t){return o.a.createElement(j.a,Object.assign({key:t},e.getPageProps(t,k[t])))}))}}]),t}(a.Component),x=Object(m.b)(function(e){e.app;var t=e.route;return{page:t.page,page_id:t.page_id,index:t.index}})(A);n(49),n(50),n(51);Object(p.a)();var S=Object(c.d)(u,Object(c.a)(d.a)),P=function(){window.pages_history=[],i.a.render(o.a.createElement(m.a,{store:S},o.a.createElement(x,null)),document.getElementById("root")),f.a()};window.cordova?document.addEventListener("deviceready",P,!1):P()},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},8:function(e,t,n){"use strict";n.d(t,"p",function(){return l}),n.d(t,"n",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"m",function(){return p}),n.d(t,"g",function(){return f}),n.d(t,"k",function(){return h}),n.d(t,"q",function(){return g}),n.d(t,"o",function(){return v}),n.d(t,"j",function(){return b}),n.d(t,"f",function(){return w}),n.d(t,"i",function(){return _}),n.d(t,"e",function(){return y}),n.d(t,"l",function(){return j}),n.d(t,"a",function(){return O}),n.d(t,"h",function(){return E});var a=n(9),o=n(13),r=n.n(o),i=n(46),c=n.n(i);function l(e){var t=new Date;return t.setTime(e),t.getFullYear()+"\u5e74"+(t.getMonth()+1)+"\u6708"+t.getDate()+"\u65e5 "+t.getHours()+":"+t.getMinutes()}function s(e,t,n){var a="",o=t,r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];e&&(o=Math.round(Math.random()*(n-t))+t);for(var i=0;i<o;i++){a+=r[Math.round(Math.random()*(r.length-1))]}return a}function u(){-1===document.body.className.indexOf("overflow_hidden")&&(document.body.className+=" overflow_hidden")}function d(e,t,n){var o=t[n];o.visible=!1;var r={};r[n]=o,e({type:"route/setState",payload:{page:Object(a.a)({},t,r)}}),1===document.getElementsByClassName("topGlobal").length&&document.body.className.indexOf("overflow_hidden")>-1&&(document.body.className=document.body.className.replace("overflow_hidden",""))}function m(e,t){window.closing=!0;var n=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"body",a=e.parentNode;!a.matches(n)&&!a.matches(t);)a=a.parentNode;return a.matches(n)&&(a=null),a}(t,".page").id.substring(5);window.pages_history.pop(),window.page_close_id=n,document.querySelector("#page_"+n).className="page slideOut"}function p(e){return c()(e,!0)}function f(){var e=localStorage.getItem("access_token");return r.a.defaults.headers.common.Authorization=e||void 0,e}function h(){return!!f()}function g(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function v(e){localStorage.setItem("access_token",e),r.a.defaults.headers.common.Authorization=e}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#login";localStorage.removeItem("access_token"),r.a.defaults.headers.common.Authorization=null,window.location.href.indexOf("?redirect=")>0||(window.location.href="".concat(e,"?redirect=")+encodeURIComponent(window.location.href.replace("#login","")))}function w(e,t){var n=[],a={};for(var o in e){var r=e[o].split("-"),i="".concat(r[0],"-").concat(r[1]);a[r[0]]||(a[r[0]]={}),!a[r[0]][r[1]]&&t[i]&&(a[r[0]][r[1]]=[]),t[i]&&a[r[0]][r[1]].push(r[2])}for(var c in Object.keys(a)){var l=Object.keys(a)[c],s={},u=[];for(var d in Object.keys(a[l])){var m=Object.keys(a[l])[d],p={};p.value=m;var f="".concat(l,"-").concat(m);t[f]&&(p.label=t[f],p.children=a[l][m].map(function(e){return{value:e,label:e}}),u.push(p))}u.length>0&&(s.value=l,s.label=t[l],s.children=u,n.push(s))}return n}function _(e){var t=e.split("-");return window.globalObject.constant.zone_names[t[0]+"-"+t[1]]+"-"+t[2]}function y(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function j(e,t){var n=document.createElement("a");n.setAttribute("href",e),t&&n.setAttribute("target",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}var O=function(e,t,n){var a;function o(){var o,r;n.userAgent.match(/ipad|iphone/i)?((o=t.createRange()).selectNodeContents(a),(r=e.getSelection()).removeAllRanges(),r.addRange(o),a.setSelectionRange(0,999999)):a.select()}return{copy:function(e){!function(e){(a=t.createElement("textArea")).value=e,t.body.appendChild(a)}(e),o(),t.execCommand("copy"),t.body.removeChild(a)}}}(window,document,navigator);function E(){var e=navigator.userAgent.toLowerCase();return/(iphone|ipad|ipod|ios)/i.test(e)?"ios":/(macintosh|mac os x)/i.test(e)?"mac":/(windows|win32)/i.test(e)?"windows":/(android)/i.test(e)?"android":/(cordova)/i.test(e)?"cordova":"web"}}},[[414,9,0,1]]]);
//# sourceMappingURL=weui.chunk.js.map
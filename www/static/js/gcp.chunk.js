(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{11:function(e,t,n){"use strict";n.d(t,"n",function(){return l}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"l",function(){return u}),n.d(t,"f",function(){return d}),n.d(t,"j",function(){return p}),n.d(t,"o",function(){return m}),n.d(t,"m",function(){return h}),n.d(t,"i",function(){return f}),n.d(t,"e",function(){return v}),n.d(t,"h",function(){return w}),n.d(t,"d",function(){return y}),n.d(t,"k",function(){return g}),n.d(t,"a",function(){return b}),n.d(t,"g",function(){return _});n(13);var a=n(20),i=n.n(a),o=n(74),c=n.n(o);function l(e){var t=new Date;return t.setTime(e),t.getFullYear()+"\u5e74"+(t.getMonth()+1)+"\u6708"+t.getDate()+"\u65e5 "+t.getHours()+":"+t.getMinutes()}function r(){-1===document.body.className.indexOf("overflow_hidden")&&(document.body.className+=" overflow_hidden")}function s(e,t){window.closing=!0;var n=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"body",a=e.parentNode;!a.matches(n)&&!a.matches(t);)a=a.parentNode;return a.matches(n)&&(a=null),a}(t,".page").id.substring(5);window.pages_history.pop(),window.page_close_id=n,document.querySelector("#page_"+n).className="page slideOut"}function u(e){return c()(e,!0)}function d(){var e=localStorage.getItem("access_token");return i.a.defaults.headers.common.Authorization=e||void 0,e}function p(){return!!d()}function m(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function h(e){localStorage.setItem("access_token",e),i.a.defaults.headers.common.Authorization=e}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#login";localStorage.removeItem("access_token"),i.a.defaults.headers.common.Authorization=null,window.location.href.indexOf("?redirect=")>0||(window.location.href="".concat(e,"?redirect=")+encodeURIComponent(window.location.href.replace("#login","")))}function v(e,t){var n=[],a={};for(var i in e){var o=e[i].split("-"),c="".concat(o[0],"-").concat(o[1]);a[o[0]]||(a[o[0]]={}),!a[o[0]][o[1]]&&t[c]&&(a[o[0]][o[1]]=[]),t[c]&&a[o[0]][o[1]].push(o[2])}for(var l in Object.keys(a)){var r=Object.keys(a)[l],s={},u=[];for(var d in Object.keys(a[r])){var p=Object.keys(a[r])[d],m={};m.value=p;var h="".concat(r,"-").concat(p);t[h]&&(m.label=t[h],m.children=a[r][p].map(function(e){return{value:e,label:e}}),u.push(m))}u.length>0&&(s.value=r,s.label=t[r],s.children=u,n.push(s))}return n}function w(e){var t=e.split("-");return window.globalObject.constant.zone_names[t[0]+"-"+t[1]]+"-"+t[2]}function y(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function g(e,t){var n=document.createElement("a");n.setAttribute("href",e),t&&n.setAttribute("target",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}var b=function(e,t,n){var a;function i(){var i,o;n.userAgent.match(/ipad|iphone/i)?((i=t.createRange()).selectNodeContents(a),(o=e.getSelection()).removeAllRanges(),o.addRange(i),a.setSelectionRange(0,999999)):a.select()}return{copy:function(e){!function(e){(a=t.createElement("textArea")).value=e,t.body.appendChild(a)}(e),i(),t.execCommand("copy"),t.body.removeChild(a)}}}(window,document,navigator);function _(){var e=navigator.userAgent.toLowerCase();return/(iphone|ipad|ipod|ios)/i.test(e)?"ios":/(macintosh|mac os x)/i.test(e)?"mac":/(windows|win32)/i.test(e)?"windows":/(android)/i.test(e)?"android":/(cordova)/i.test(e)?"cordova":"web"}},238:function(e,t,n){e.exports=n(413)},31:function(e,t,n){"use strict";var a=n(3),i=n(4),o=n(6),c=n(5),l=n(7),r=n(0),s=n.n(r),u=n(28),d=n.n(u),p=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(c.a)(t).call(this,e))).el=document.createElement("div"),n.container_id=e.id?e.id:"main-content",e.onScroll&&(n.el.onscroll=e.onScroll),e.className?n.el.className=e.className:n.el.className="portal",n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.getElementById(this.container_id).appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.getElementById(this.container_id).removeChild(this.el)}},{key:"render",value:function(){return d.a.createPortal(this.props.children,this.el)}}]),t}(s.a.Component);t.a=p},37:function(e,t,n){"use strict";var a={}.hasOwnProperty;t.a=function e(){for(var t=[],n=0;n<arguments.length;n++){var i=arguments[n];if(i){var o=typeof i;if("string"===o||"number"===o)t.push(i);else if(Array.isArray(i))t.push(e.apply(null,i));else if("object"===o)for(var c in i)a.call(i,c)&&i[c]&&t.push(c)}}return t.join(" ")}},387:function(e,t,n){},388:function(e,t,n){},409:function(e,t,n){},410:function(e,t,n){},411:function(e,t,n){},413:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(28),c=n.n(o),l=n(34),r=n(13),s=n(20),u=n.n(s),d="user",p={me:null};function m(e){return function(t){var n=window.weui.loading("\u52a0\u8f7d\u4e2d...");return u.a.get("/me").then(function(a){var i=a.data;n.hide(),e&&e(i),t({type:d+"/setState",payload:{me:i.body}})}).catch(function(t){n.hide(),e&&e({error:t})})}}var h="order",f={items:[],item:null,order_id:null,showDetail:!1,order_no:null,loadingDetail:!0};var v="instance",w={items:[],item:null,loading:!1,error:null,showVipLines:!1,selectedVipType:null,showVipLinesActionSheet:!1,timestamp:null,showAddService:!1};function y(e,t){return function(n){b();var a=window.weui.loading("\u5220\u9664\u4e2d...");return u.a.delete("/compute/instance/".concat(e),null).then(function(e){e.data;a.hide(),t&&t()}).catch(function(e){a.hide(),t&&t()})}}function g(e,t){return console.log("getInstance",e),function(n){return u.a.get("/compute/instance/".concat(e),{timeout:25e3}).then(function(a){var i=a.data;t?t(i):(console.log("res",e,i.body.ip,i.body.status),"OK"===i.body.status||"RUNNING"===i.body.status?n(_()):setTimeout(function(){n(g(e))},1400))}).catch(function(t){setTimeout(function(){n(g(e))},1400)})}}function b(){window.__time_id_fetch_instance&&clearInterval(window.__time_id_fetch_instance)}function _(){return function(e){var t=window.weui.loading("\u52a0\u8f7d\u4e2d...");return u.a.get("/compute/instances").then(function(n){var a=n.data;e({type:v+"/setState",payload:{items:a.body.rows}}),b(),a.body,window.__time_id_fetch_instance=setInterval(function(){a.body},3e3),t.hide()}).catch(function(e){t.hide()})}}window.globalObject.delays={};var E=n(239),C="payment",k={items:[]};var O={loading:!0,access_token:null};var j="route",N={page:null,index:!0,page_close_id:null,keys:[]};var S="ss_server",T={current_connect_status:null,current_connect_id:null};var I=Object(l.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d+"/setState":return Object(r.a)({},e,t.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/setState":case"app/logged":return Object(r.a)({},e,t.payload);default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h+"/setState":return Object(r.a)({},e,t.payload);default:return e}},instance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"instance/setState":return Object(r.a)({},e,t.payload);default:return e}},payment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C+"/setState":return Object(r.a)({},e,t.payload);default:return e}},route:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,n=e.keys;switch(t.type){case j+"/setState":case j+"/onClosePage":return Object(r.a)({},e,t.payload);case j+"/hidePage":var a=n.pop();console.log("hidePage",a,n);var i={};return i[a]={visible:!1,id:a},n.length>0?window.location.href="#"+n[n.length-1]:window.location.href="#",Object(r.a)({},e,{page:Object(r.a)({},e.page,i),page_close_id:null,index:!0,keys:n});case j+"/showPage":var o=t.payload.id,c={};return console.log("showPage",n,o),n.push(o),c[o]=Object(r.a)({visible:!0,id:o},t.payload),window.location.href="#"+o,Object(r.a)({},e,{page:Object(r.a)({},e.page,c),page_close_id:null,index:!1,keys:n});default:return e}},ss_server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S+"/setState":return Object(r.a)({},e,t.payload);default:return e}}}),P=n(73),x=n(2),D=n(62),z=n(63),A=n(3),B=n(4),R=n(6),L=n(5),H=n(7),U=n(11),q=(n(77),n(47)),M=n(75),V=n(21),F=n(169),$=function(e,t){e.host;var n=e.port,a=e.pwd,i=e.name,o=(e.password,e.ip),c=(e.id,"ss://"+Object(F.base64encode)("".concat("aes-256-cfb",":").concat(a,"@").concat(o,":").concat(n))),l=i+"_"+n;if("cordova"===Object(U.g)()){window.ss_server.init({host:o,port:n,method:"aes-256-cfb",password:a,name:i,accessKey:c,id:l}),t({type:"ss_server/setState",payload:{current_connect_status:null,current_connect_id:l}});var r=weui.loading("\u8fde\u63a5\u4e2d...");window.ss_server.start(l,function(e){var n=e.status,a=e.msg;r.hide(),console.log(JSON.stringify({status:n,msg:a})),"ERROR"===n?weui.toast(a):(t({type:"ss_server/setState",payload:{current_connect_status:n,current_connect_id:l}}),t({type:"route/hidePage"}))})}else Object(U.k)(c)};n(71);function G(){return i.a.createElement("div",{className:"icons icons_ss",alt:""})}function J(){return i.a.createElement("div",{className:"icons icons_ovpn",alt:""})}n(387),n(388);var W=n(22),K={close:i.a.createElement(W.e,{size:"1.8em"}),add:i.a.createElement(W.b,{size:"1.8em"}),check:i.a.createElement(W.d,{size:"1.8em"}),del:i.a.createElement(W.g,{size:"1.8em"})},Q=Object(x.b)()(function(e){var t=e.dispatch,n=e.type,a=e.style,o=void 0===a?{}:a,c=e.onClick,l=e.index,s=void 0===l?1:l,u=e.action,d={},p=function(e){c?c(e.target):"close"===n&&Object(U.c)(t,e.target)};return d[void 0===u?"left":u]=52*(parseInt(s)-1),i.a.createElement("div",{style:Object(r.a)({},d,o),className:"page_top_icons",onClick:function(e){p(e)}},K[n])}),Z=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(R.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={visiblePort:!1,titlePort:null},n}return Object(H.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(_())}},{key:"componentWillUnmount",value:function(){b()}},{key:"onSelectCell",value:function(e){var t=this,n=e.id;"openvpn"===e.server_type?this.props.dispatch(g(n,function(e){var n=e.body;t.onSelectCell1(n)})):this.onSelectCell1(e)}},{key:"onSelectCell1",value:function(e){var t=this,n=e.id,a=e.zone,o=e.server_type,c=e.note,l=e.ovpn_config,r=e.name,s=e.status,d=e.port_status,p=e.ip,m=e.port,h=[];console.log(s),"TERMINATED"===s&&(h=[{label:"\u542f\u52a8",onClick:function(){window.weui.confirm("\u786e\u5b9a\u8981\u542f\u52a8\u4e48",function(){var e,a;t.props.dispatch((e=n,a=function(){t.props.dispatch(_())},function(t){b();var n=window.weui.loading("\u542f\u52a8\u4e2d...");return u.a.post("/compute/instance/status/".concat(e,"/start"),null).then(function(e){var i=e.data;n.hide(),200===i.code?(t(g(i.body.id)),a&&a()):window.weui.toast("\u542f\u52a8\u5931\u8d25")}).catch(function(e){n.hide(),a&&a()})}))})}}]),"RUNNING"!==s&&"OK"!==s||(h=[{label:"\u505c\u6b62",onClick:function(){window.weui.confirm("\u786e\u5b9a\u8981\u505c\u6b62\u4e48",function(){var e,a;t.props.dispatch((e=n,a=function(){t.props.dispatch(_())},function(t){b();var n=window.weui.loading("\u505c\u6b62\u4e2d...");return u.a.post("/compute/instance/status/".concat(e,"/stop"),null).then(function(e){var t=e.data;n.hide(),200===t.code?a&&a():window.weui.toast("\u505c\u6b62\u5931\u8d25")}).catch(function(e){n.hide(),a&&a()})}))})}},{label:"\u91cd\u542f(\u66f4\u6362IP)",onClick:function(){var e="\u91cd\u542f\u5c06\u4f1a\u5220\u9664\u6b64\u7ebf\u8def,\u521b\u5efa\u4e00\u6761\u65b0\u7684\u7ebf\u8def";window.location.host==="".concat(p,":").concat(m)&&(e+=",\u5f53\u524d\u7f51\u5740\u6240\u5728\u7ebf\u8def\u8ddf\u9700\u8981\u91cd\u542f\u7684\u7ebf\u8def\u5728\u540c\u4e00\u4e2a\u670d\u52a1\u5668,\u91cd\u542f\u4e4b\u540e\u6b64\u7f51\u5740\u4e0d\u80fd\u518d\u8bbf\u95ee,\u56e0\u6b64,\u8bf7\u5173\u6ce8\u60a8\u7684\u90ae\u7bb1\u65b0\u83b7\u53d6\u8bbf\u95ee\u5730\u5740"),window.weui.confirm(e,function(){var e,a;t.props.dispatch((e=n,a=function(){t.props.dispatch(_())},function(t){b();var n=window.weui.loading("\u91cd\u542f\u4e2d...");return u.a.post("/compute/instance/status/".concat(e,"/restart"),null).then(function(e){var i=e.data;n.hide(),200===i.code?(t(g(i.body.id)),a&&a()):window.weui.toast("\u91cd\u542f\u5931\u8d25")}).catch(function(e){n.hide(),a&&a()})}))})}}]),"ovpn"!==o&&"openvpn"!==o||"UP"!==d||h.unshift({label:"\u5bfc\u51faOVPN",onClick:function(){t.props.dispatch({type:"app/hideActionSheet"}),l&&l.length>0?Object(U.d)(r+".ovpn",l):window.weui.alert("\u5bfc\u51faOVPN\u9519\u8bef")}}),h.unshift({label:"\u5907\u6ce8",onClick:function(){window.weui.prompt("\u8bf7\u8f93\u5165",function(e){var a,i,o,c;t.props.dispatch((a=n,i="note",o=e,c=function(){t.props.dispatch(_())},function(e){b();var t=window.weui.loading("\u4fdd\u5b58\u4e2d...");return u.a.put("/compute/instance/change/".concat(a),{value:{field:i,value:o}}).then(function(e){var n=e.data;t.hide(),200===n.code?c&&c():window.weui.toast("\u4fdd\u5b58\u5931\u8d25")}).catch(function(e){t.hide(),c&&c()})}))},function(){},{title:"\u5907\u6ce8",value:c||""})}});var f=r.split("-"),v=f[f.length-1],w=this.props.me;p&&h.unshift({label:"\u6d4b\u901f",onClick:function(){Object(U.k)("http://ping.chinaz.com/"+p,"_blank")}}),"UP"===d&&h.unshift({label:"\u8fde\u63a5",onClick:function(){$(e,t.props.dispatch)}}),w&&0===w.level&&h.unshift({label:"\u67e5\u770b\u8be6\u60c5",onClick:function(){t.props.dispatch({type:"instance/setState",payload:{item:e}}),t.props.dispatch({type:"route/showPage",payload:{id:"instance",onAdd:"shadowsocks"===o?function(){t.props.dispatch({type:"route/showPage",payload:{id:"instance_port_add",title:"\u6dfb\u52a0\u7aef\u53e3"}})}:void 0,title:i.a.createElement("span",{style:{marginRight:8}},v," ",Object(U.h)(a))}})}});var E=[{label:"\u5220\u9664\u6b64\u7ebf\u8def",onClick:function(){var e;e=window.location.host==="".concat(p,":").concat(m)?",\u5f53\u524d\u7f51\u5740\u6240\u5728\u7ebf\u8def\u8ddf\u9700\u8981\u5220\u9664\u7684\u7ebf\u8def\u5728\u540c\u4e00\u4e2a\u670d\u52a1\u5668,\u5220\u9664\u4e4b\u540e\u6b64\u7f51\u5740\u4e0d\u80fd\u518d\u8bbf\u95ee,\u56e0\u6b64,\u8bf7\u5173\u6ce8\u60a8\u7684\u90ae\u7bb1\u65b0\u83b7\u53d6\u8bbf\u95ee\u5730\u5740":"\u786e\u8ba4\u8981\u5220\u9664\u6b64\u7ebf\u8def?",window.weui.confirm(e,function(){t.props.dispatch(y(n,function(){t.props.dispatch(y(n,function(){t.props.dispatch(_())}))}))})}}];window.weui.actionSheet([].concat(Object(M.a)(h),E),[],{title:""})}},{key:"getStatus",value:function(e){return"STAGING"===e?i.a.createElement("span",{style:{color:"steelblue"}},"\u542f\u52a8\u4e2d"):"OK"===e?i.a.createElement("span",{style:{color:"green"}},"\u8fd0\u884c\u4e2d"):"TERMINATED"===e?i.a.createElement("span",{style:{color:"orange"}},"\u5df2\u505c\u6b62"):"-"}},{key:"render",value:function(){var e=this,t=this.props.items;return i.a.createElement("div",{className:"VipLines"},i.a.createElement(Q,{type:"close"}),i.a.createElement("div",{style:{margin:"0 2px"}},t.length>0&&t.map(function(t,n){var a=t.ip,o=t.name,c=t.status,l=t.port_status,r=t.note,s=t.server_type,u=t.id,d=t.zone,p=window.globalObject.delays,m=p[a]?p[a].toFixed(1):null;console.log(m);var h=o.split("-"),f=h[h.length-1],v=Object(U.h)(d);return i.a.createElement(V.Cell,{key:u,onClick:e.onSelectCell.bind(e,t),access:!0},i.a.createElement(V.CellHeader,null,"TERMINATED"!==c&&"UP"!==l&&i.a.createElement("i",{className:"weui-loading"}),i.a.createElement("span",null,f," ",v)),i.a.createElement(V.CellBody,{style:{fontSize:12,marginLeft:12}},i.a.createElement("span",null,e.getStatus(c))),i.a.createElement(V.CellFooter,null,i.a.createElement("span",{style:{fontSize:12,marginRight:12}},r),"openvpn"===s?i.a.createElement(J,null):i.a.createElement(G,null)))})))}}]),t}(a.Component),Y=Object(x.b)(function(e){var t=e.app,n=e.user,a=e.instance;return{selectedVipType:a.selectedVipType,items:a.items,instance:a.item,timestamp:t.timestamp,me:n.me,showVipLinesActionSheet:a.showVipLinesActionSheet}})(Z),X=(n(72),n(170)),ee=function(e){var t=e.selected,n=e.save,a=e.price,o=e.period,c=e.popular,l=e.onClick;return i.a.createElement("div",{onClick:l,className:t?"plan selected":"plan"},t&&i.a.createElement("div",{className:"check"},i.a.createElement(X.a,{size:"2em"})),c&&i.a.createElement("div",{className:"popular"},"\u63a8\u8350"),i.a.createElement("div",{className:"period"},i.a.createElement("b",null,o)," \u4e2a\u6708"),n&&i.a.createElement("div",{className:"save"},i.a.createElement("i",null,"$"),i.a.createElement("b",null," ",n)),i.a.createElement("div",{className:"price"},i.a.createElement("i",null,"$"),i.a.createElement("b",null,a)," / \u6708"),i.a.createElement("div",{className:"desc"},o,"\u4e2a\u6708\u4ec5\u9700\u652f\u4ed8 $ ",a*o,n&&i.a.createElement("b",null,"$ ",(n*o).toFixed(1)),n&&i.a.createElement("span",null,",",i.a.createElement("span",{className:"save_percent"},"\u8282\u7701",(100*(n-a)/n).toFixed(1)," %"))))},te=n(104),ne=function(e){var t=e.period,n=e.price,a=e.payment_type,o=e.btnPaymentDisabled,c=e.onPayBtnClicked,l=e.selected_payment_type,r=e.amount,s=e.title,u=e.icon,d=e.onClick;return i.a.createElement("div",{className:"payment_type"},i.a.createElement("div",{onClick:d,className:"header "+(a.length>0&&a===l&&"bottom_line")},a.length>0&&a===l?i.a.createElement(te.a,null):i.a.createElement(te.b,null),i.a.createElement("b",{className:"title"},s)," ",u),a.length>0&&a===l&&i.a.createElement("div",{className:"body slideIn"},i.a.createElement("div",null,"\u70b9\u51fb\u4e0b\u9762\u6309\u94ae\u5b8c\u6210\u652f\u4ed8,"),i.a.createElement("div",{style:{marginTop:16,marginBottom:16}},i.a.createElement("b",null,"\u91d1\u989d:")," ",i.a.createElement("b",{style:{color:"green",fontSize:18}},"$",r)),i.a.createElement("div",null,t,"\u6708\u5957\u9910, (\u5e73\u5747 $",n,"/\u6708 )"),i.a.createElement("div",{style:{marginTop:24,marginBottom:24}},i.a.createElement("button",{disabled:o,onClick:c,className:o?"weui-btn weui-btn_primary weui-btn_disabled":"weui-btn weui-btn_primary"},"\u652f\u4ed8"))))};function ae(){return i.a.createElement("div",{className:"icons icons_paypal",alt:""})}function ie(){return i.a.createElement("div",{className:"icons icons_eth",alt:""})}var oe=n(171),ce=n.n(oe),le=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(R.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={qr_code_data_url:null,left_time:0},n}return Object(H.a)(t,e),Object(B.a)(t,[{key:"componentWillUnmount",value:function(){this.time_id&&clearInterval(this.time_id)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.paymentEth,n=t.address,a=t.created_at,i=t.payment_id;this.time_id&&clearInterval(this.time_id),this.time_id=setInterval(function(){if(e.state.left_time>=0){var t=900-parseInt(+new Date/1e3-a);e.setState({left_time:t}),document.querySelector("#min_left")&&(document.querySelector("#min_left").innerHTML=e.getLeftTimeCountDown(t))}else document.querySelector("#min_left")&&(document.querySelector("#min_left").innerHTML="\u8d85\u65f6"),clearInterval(e.time_id),e.timeout()},1e3),ce.a.toDataURL(n,function(t,n){e.setState({qr_code_data_url:n})}),this.getPaymentStatus(i)}},{key:"timeout",value:function(){window.weui.alert("\u4ed8\u6b3e\u8d85\u65f6,\u8bf7\u91cd\u65b0\u4e0b\u5355",function(){window.location.reload()})}},{key:"getPaymentStatus",value:function(e){var t=this;this.props.dispatch(function(e,t){var n=e.payment_type,a=e.payment_id;return function(e){return u.a.get("/payment/"+n+"/check/".concat(a)).then(function(e){var n=e.data;t(n)}).catch(function(e){t({error:e})})}}({payment_type:"eth",payment_id:e},function(n){var a=n.body,i=n.code,o=n.error;if(200!==i||o)setTimeout(function(){t.getPaymentStatus(e)},2e3);else{var c=a.status;c&&"approved"!==c?setTimeout(function(){t.getPaymentStatus(e)},1e3):window.weui.alert("\u652f\u4ed8\u6210\u529f",function(){window.location.href="#order",window.location.reload()})}}))}},{key:"onSelectQrCode",value:function(e){var t=e.address;window.weui.toast("\u81ea\u52a8\u590d\u5236\u6210\u529f"),setTimeout(function(){window.weui.alert("\u8bf7\u5c06ETH \u53d1\u9001\u5230: ".concat(t),function(){U.a.copy(t)})},1400)}},{key:"getLeftTimeCountDown",value:function(e){var t=Math.floor(e%3600/60),n=Math.floor(e%60);return e>0?t+":"+n:"\u8d85\u65f6"}},{key:"showInfo",value:function(e){var t=e.amount_eth,n=e.amount_usd,a=e.exchange_price;window.weui.actionSheet([{label:"\u603b\u4ef7: ".concat(n," USD"),onClick:function(){}},{label:"\u6c47\u7387: ".concat(a," USD"),onClick:function(){}},{label:"\u5e94\u4ed8\u91d1\u989d: ".concat(t," ETH"),onClick:function(){}}],[{label:"\u53d6\u6d88",onClick:function(){}}],{title:'\u8bf7\u5728\u89c4\u5b9a\u65f6\u95f4\u5185\u4ed8\u6b3e <b id="min_left"></b>',className:"weui-custom",onClose:function(){}})}},{key:"render",value:function(){var e=this.props.paymentEth,t=e.amount_eth,n=this.state.qr_code_data_url;return i.a.createElement("div",{className:"eth_payment"},i.a.createElement(Q,{type:"close"}),i.a.createElement("div",{className:"tips"},"\u626b\u63cf QR \u7801\u6216\u5c06\u4ed8\u6b3e\u8be6\u7ec6\u4fe1\u606f\u590d\u5236\u7c98\u8d34\u5230\u60a8\u7684\u94b1\u5305"),i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"header"},i.a.createElement("div",null,i.a.createElement(W.f,{onClick:this.onSelectQrCode.bind(this,e),size:"2em"})),i.a.createElement("div",{className:"title"},i.a.createElement("b",null," ",t," ETH")),i.a.createElement("div",null,i.a.createElement(W.i,{onClick:this.showInfo.bind(this,e),size:"2em"}))),i.a.createElement("div",{id:"qr-container"},n&&i.a.createElement("img",{onClick:this.onSelectQrCode.bind(this,e),src:n,alt:""}))))}}]),t}(a.Component),re=Object(x.b)()(le),se=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(R.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={paymentEth:null,btnPaymentDisabled:!1,payment_type:"",eth:!1,selectedPlan:0},n}return Object(H.a)(t,e),Object(B.a)(t,[{key:"onPayBtnClicked",value:function(e,t,n){var a=this;this.setState({btnPaymentDisabled:!0});var i=window.weui.loading("\u52a0\u8f7d\u4e2d..."),o=window.location.href.replace("#plan","#order");this.props.dispatch(function(e,t){var n=e.payment_type,a=e.redirect_url,i=e.amount,o=e.desc;return function(e){return u.a.get("/payment/"+n+"?"+E.stringify({amount:i,desc:o,redirect_url:a})).then(function(e){var n=e.data;t(n)}).catch(function(e){t({error:e})})}}({payment_type:this.state.payment_type,amount:t*n,desc:"".concat(n,"\u4e2a\u6708\u5957\u9910")},function(e){var t=e.body,n=e.code,c=e.msg;if(200===n){var l=t.url;"paypal"===a.state.payment_type&&(window.location.href=l+"&redirect_url="+encodeURIComponent(o)),"eth"===a.state.payment_type&&(a.setState({paymentEth:t,eth:!0}),a.props.dispatch({type:"route/showPage",payload:{id:"eth_confirm"}})),i.hide()}else i.hide(),window.weui.topTips(c);a.setState({btnPaymentDisabled:!1})}))}},{key:"onTogglePayment",value:function(e){var t=this.state.payment_type===e?"":e;this.setState({payment_type:t})}},{key:"render",value:function(){var e=this,t=window.globalObject.constant,n=t.plans,a=t.payment,o=n[this.state.selectedPlan],c=o.price,l=o.period,r=c*l;return i.a.createElement("div",{className:"Payment"},i.a.createElement(Q,{type:"close"}),i.a.createElement("div",{style:{marginTop:0,fontSize:16,marginBottom:12}},i.a.createElement("b",null,"Vip \u5957\u9910\u65b9\u6848")),i.a.createElement("div",{style:{marginTop:16}},i.a.createElement("div",{className:"step"},i.a.createElement("b",null,"\u7b2c\u4e00\u6b65")),i.a.createElement("div",{style:{marginTop:16,fontSize:16}},i.a.createElement("b",null,i.a.createElement("b",{style:{color:"green"}},"\u9009\u62e9"),"\u4e00\u4e2a\u9002\u5408\u4f60\u7684\u5957\u9910")),i.a.createElement("div",{style:{marginTop:8}},"\u6240\u6709\u5957\u9910\u5305\u62ec\u9002\u7528\u6240\u6709\u5e73\u53f0App,7*24\u5c0f\u65f6\u5728\u7ebf\u5ba2\u670d\u652f\u6301\u4ee5\u53ca\u9ad8\u901f\u4e0d\u9650\u5e26\u5bbd\u7684\u7ebf\u8def"),i.a.createElement("div",{className:"plans"},window.globalObject.constant.plans.map(function(t,n){var a=t.price,o=t.save,c=t.period,l=t.popular;return i.a.createElement(ee,{key:n,onClick:function(){e.setState({selectedPlan:n})},price:a,save:o,period:c,popular:l,selected:e.state.selectedPlan===n})}),i.a.createElement("div",{style:{margin:"10px 0"}},"\u6240\u6709\u4ed8\u6b3e\u91d1\u989d\u7ed3\u7b97\u8d27\u5e01\u4e3a\u7f8e\u5143"))),i.a.createElement("div",{style:{marginTop:16}},i.a.createElement("div",{className:"step"},i.a.createElement("b",null,"\u7b2c\u4e8c\u6b65")),i.a.createElement("div",{style:{marginTop:16,fontSize:16}},"\u9009\u62e9\u652f\u4ed8\u65b9\u5f0f"),i.a.createElement("div",{className:"payments"},a.includes("paypal")&&i.a.createElement(ne,{btnPaymentDisabled:this.state.btnPaymentDisabled,onPayBtnClicked:this.onPayBtnClicked.bind(this,"paypal",c,l),period:l,price:c,payment_type:"paypal",onClick:this.onTogglePayment.bind(this,"paypal"),title:"Paypal",selected_payment_type:this.state.payment_type,icon:i.a.createElement(ae,null),amount:r}),a.includes("eth")&&i.a.createElement(ne,{btnPaymentDisabled:this.state.btnPaymentDisabled,onPayBtnClicked:this.onPayBtnClicked.bind(this,"eth",c,l),period:l,price:c,payment_type:"eth",onClick:this.onTogglePayment.bind(this,"eth"),title:"Eth",selected_payment_type:this.state.payment_type,icon:i.a.createElement(ie,null),amount:r}))),i.a.createElement(q.a,{title:"Eth\u652f\u4ed8",id:"eth_confirm",visible:this.props.page.eth_confirm&&this.props.page.eth_confirm.visible},i.a.createElement(re,{paymentEth:this.state.paymentEth})))}}]),t}(a.Component),ue=Object(x.b)(function(e){return{page:e.route.page}})(se),de=(n(409),n(172));function pe(){return i.a.createElement("div",{className:"empty_record"},i.a.createElement(de.a,{style:{color:"#d8d8d8"},size:"5em"}))}var me=function(e){function t(){return Object(A.a)(this,t),Object(R.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e;this.props.dispatch(function(t){var n=window.weui.loading("\u52a0\u8f7d\u4e2d...");return u.a.get("/orders").then(function(a){var i=a.data;n.hide(),e&&e(i),t({type:h+"/setState",payload:{items:i.body.rows}})}).catch(function(t){n.hide(),e&&e({error:t})})})}},{key:"onSelectCell",value:function(e){var t=e.id,n=e.order_no;this.props.dispatch({type:"order/setState",payload:{order_id:t,order_no:n,loadingDetail:!0}}),this.props.dispatch({type:"route/showPage",payload:{id:"order_detail",title:"\u8ba2\u5355\u8be6\u60c5"}})}},{key:"getStatus",value:function(e){return"approved"===e?i.a.createElement("span",{style:{color:"green"}},"\u5df2\u652f\u4ed8"):"cancel"===e?i.a.createElement("span",{style:{color:"gray"}},"\u5df2\u53d6\u6d88"):"timeout"===e?i.a.createElement("span",{style:{color:"firebrick"}},"\u8d85\u65f6"):"created"===e?i.a.createElement("span",{style:{color:"dodgerblue"}},"\u652f\u4ed8\u4e2d"):"-"}},{key:"render",value:function(){var e=this,t=this.props.items;return i.a.createElement("div",{className:"Order"},i.a.createElement(Q,{type:"close"}),i.a.createElement("div",{style:{margin:"0 2px"}},t.length>0?t.map(function(t,n){return i.a.createElement(V.Cell,{key:n,onClick:e.onSelectCell.bind(e,t),access:!0},i.a.createElement(V.CellHeader,{style:{display:"block"}},i.a.createElement("p",null,t.desc),i.a.createElement("p",null," ",Object(U.n)(1e3*t.created_at))),i.a.createElement(V.CellBody,{style:{marginLeft:24}},i.a.createElement("div",null,"$ ",t.amount),i.a.createElement("div",null)),i.a.createElement(V.CellFooter,null,i.a.createElement("span",null,e.getStatus(t.status))))}):i.a.createElement(pe,null)))}}]),t}(a.Component),he=Object(x.b)(function(e){var t=e.order;return{items:t.items,showDetail:t.showDetail,order_no:t.order_no}})(me),fe=(n(410),function(e){function t(){return Object(A.a)(this,t),Object(R.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(m())}},{key:"render",value:function(){var e=this.props.me;return e?i.a.createElement("div",{className:"Account"},i.a.createElement(Q,{type:"close"}),i.a.createElement(V.Cells,null,i.a.createElement(V.Cell,null,i.a.createElement(V.CellHeader,null,"Email"),i.a.createElement(V.CellBody,null),i.a.createElement(V.CellFooter,null,e.email)),i.a.createElement(V.Cell,null,i.a.createElement(V.CellHeader,null,"\u5957\u9910\u8fc7\u671f\u65f6\u95f4"),i.a.createElement(V.CellBody,null),i.a.createElement(V.CellFooter,null,e.expired_at>0?Object(U.n)(1e3*e.expired_at):"-")))):null}}]),t}(a.Component)),ve=Object(x.b)(function(e){return{me:e.user.me}})(fe),we=(n(411),function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(R.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={email:"",code:"",sendTxt:"\u83b7\u53d6\u9a8c\u8bc1\u7801",sendBtnDisabled:!1,agree:!0,pass:!1},n}return Object(H.a)(t,e),Object(B.a)(t,[{key:"onSendCapthca",value:function(){var e=this;if(!Object(U.o)(this.state.email))return window.weui.topTips("\u8bf7\u8f93\u5165\u6b63\u786e\u7684Email\u5730\u5740");var t=window.weui.loading("\u83b7\u53d6\u4e2d...");u.a.post("/auth/email/captcha",{email:this.state.email}).then(function(n){var a=n.data,i=a.code,o=a.msg;t.hide(),200===i?(window.weui.toast("\u53d1\u9001\u6210\u529f"),e.setState({sendBtnDisabled:!0,sendTxt:"60"}),window.___t_id=setInterval(function(){var t=e.state.sendTxt;(t=parseInt(t)-1)<=0?(e.setState({sendTxt:"\u83b7\u53d6\u9a8c\u8bc1\u7801",sendBtnDisabled:!1}),clearInterval(window.___t_id)):e.setState({sendTxt:t})},1e3)):window.weui.topTips(o)}).catch(function(){return t.hide()})}},{key:"onChangeInput",value:function(e,t){var n=this,a=t.target,i={};i[e]=a.value,this.setState(Object(r.a)({},i),function(){n.onCheckInput()})}},{key:"onLogin",value:function(){var e=this;this.onCheckInput();var t=window.weui.loading("\u767b\u5f55\u4e2d...");u.a.post("/auth/email/captcha/verify",{email:this.state.email,code:this.state.code}).then(function(n){var a=n.data,i=a.code,o=a.body,c=a.msg;if(t.hide(),200===i){window.weui.toast(c);var l=o.access_token,s=o.user;e.props.dispatch({type:"user/setState",payload:{me:Object(r.a)({},s,{email:e.state.email})}}),Object(U.m)(l),e.props.dispatch({type:"app/logged",payload:{access_token:l}}),window.location.href="#index",window.location.reload(),e.props.dispatch({type:"app/hideHalfScreenDialog"})}else window.weui.topTips(c)}).catch(function(){return t.hide()})}},{key:"onCheckInput",value:function(){var e=this.state,t=e.email,n=e.code;e.agree&&Object(U.o)(t)&&4===n.length?this.setState({pass:!0}):this.setState({pass:!1})}},{key:"onChangeAgree",value:function(e){var t=this,n=e.target;this.setState({agree:n.checked},function(){t.onCheckInput()})}},{key:"render",value:function(){return i.a.createElement("div",{className:"Login"},i.a.createElement(Q,{type:"close",onClick:function(){window.history.go(-1)}}),i.a.createElement("div",{className:"weui-form",style:{paddingTop:32}},i.a.createElement("div",{className:"weui-form__text-area"},i.a.createElement("h2",{className:"weui-form__title"},"\u767b\u5f55"),i.a.createElement("div",{className:"weui-form__desc"})),i.a.createElement("div",{className:"weui-form__control-area",style:{marginTop:16}},i.a.createElement("div",{className:"weui-cells__group weui-cells__group_form"},i.a.createElement("div",{className:"weui-cells weui-cells_form"},i.a.createElement("div",{className:"weui-cell weui-cell_active"},i.a.createElement("div",{className:"weui-cell__hd"},i.a.createElement("label",{className:"weui-label"},"Email")),i.a.createElement("div",{className:"weui-cell__bd"},i.a.createElement("input",{className:"weui-input",type:"text",onChange:this.onChangeInput.bind(this,"email"),placeholder:"\u8bf7\u8f93\u5165Email",value:this.state.email})),i.a.createElement("div",{className:"weui-cell__ft"},i.a.createElement("button",{className:"weui-btn_reset weui-btn_icon"},i.a.createElement("i",{id:"showIOSDialog1",className:"weui-icon-info-circle"})))),i.a.createElement("div",{className:"weui-cell weui-cell_active weui-cell_vcode"},i.a.createElement("div",{className:"weui-cell__hd"},i.a.createElement("label",{className:"weui-label"},"\u9a8c\u8bc1\u7801")),i.a.createElement("div",{className:"weui-cell__bd"},i.a.createElement("input",{onChange:this.onChangeInput.bind(this,"code"),autoFocus:"",value:this.state.code,className:"weui-input",type:"number",pattern:"[0-9]*",placeholder:"\u8f93\u5165\u9a8c\u8bc1\u7801",maxLength:"6"})),i.a.createElement("div",{className:"weui-cell__ft"},i.a.createElement("button",{disabled:this.state.sendBtnDisabled,onClick:this.onSendCapthca.bind(this),className:"weui-btn weui-btn_default weui-vcode-btn"},this.state.sendTxt)))))),i.a.createElement("div",{className:"weui-form__tips-area hide"},i.a.createElement("label",{id:"weuiAgree",htmlFor:"weuiAgreeCheckbox",className:"weui-agree"},i.a.createElement("input",{id:"weuiAgreeCheckbox",type:"checkbox",onChange:this.onChangeAgree.bind(this),className:"weui-agree__checkbox"}),i.a.createElement("span",{className:"weui-agree__text"},"\u9605\u8bfb\u5e76\u540c\u610f",i.a.createElement("button",{href:"#"},"\u300a\u76f8\u5173\u6761\u6b3e\u300b")))),i.a.createElement("div",{className:"weui-form__opr-area"},i.a.createElement("button",{disabled:!this.state.pass,onClick:this.onLogin.bind(this),className:this.state.pass?"weui-btn weui-btn_primary":"weui-btn weui-btn_primary weui-btn_disabled"},"\u786e\u5b9a")),"cordova"!==Object(U.g)()&&i.a.createElement("div",{className:"oauth"},i.a.createElement("div",{className:"google",onClick:function(){var e=Object(U.l)(window.location.href),t="".concat(e.protocol,"//").concat(e.host),n=window.globalObject.google_login_url+"?redirect_url="+encodeURIComponent(t);Object(U.k)(n,"_blank")}}))))}}]),t}(a.Component)),ye=Object(x.b)(function(e){return{}})(we),ge=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(R.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={star_css:"star_off",tipTxt:null},n.stop_interval=!0,n}return Object(H.a)(t,e),Object(B.a)(t,[{key:"onCreateLine",value:function(){var e=this,t=this.props.me,n=[{label:"Shadowsocks",value:"shadowsocks"}];t&&0===t.level&&n.push({label:"OpenVpn",value:"openvpn"}),window.weui.picker(n,{defaultValue:["shadowsocks"],className:"weui-custom",onChange:function(e){console.log(e)},onConfirm:function(t){var n=t[0];setTimeout(function(){window.weui.picker(window.globalObject.constant.zones,{className:"weui-custom",container:"body",title:"\u9009\u62e9\u533a\u57df",defaultValue:window.globalObject.constant.default_zone,onChange:function(e){console.log(e)},onConfirm:function(t){var a="".concat(t[0].value,"-").concat(t[1].value,"-").concat(t[2].value);e.props.dispatch(function(e,t){var n=e.zone,a=e.server_type;return function(e){var i=window.weui.loading("\u521b\u5efa\u4e2d...");return u.a.post("/compute/instance/".concat(n,"/").concat(a),null).then(function(n){var a=n.data,o=a.body,c=a.code,l=a.msg;i.hide(),200===c?(e({type:v+"/setState",payload:{item:o}}),e(g(o.id)),t&&t()):(i.hide(),window.weui.topTips(l),501===c&&setTimeout(function(){window.location.href="#plan",window.location.reload()},1e3))}).catch(function(e){i.hide(),t&&t()})}}({zone:a,server_type:n},function(){document.querySelector(".weui-toast__content").innerText="\u52a0\u8f7d\u4e2d...",e.props.dispatch(_())}))}})},500)},id:"picker",title:"\u9009\u62e9\u7c7b\u578b"})}},{key:"onSelectCell",value:function(e){var t=e.id;if(["instance","line","order","plan","account"].includes(t)&&!Object(U.j)())return window.weui.alert("\u8bf7\u5148\u767b\u9646",function(){return Object(U.i)()});window.location.href="#"+t}},{key:"connect",value:function(){var e=this,t=this.props,n=t.current_connect_id,a=t.current_connect_status;console.log(JSON.stringify({current_connect_id:n,current_connect_status:a})),"CONNECTED"===a&&(this.props.dispatch({type:"ss_server/setState",payload:{current_connect_status:"DISCONNECTED"}}),this.setState({star_css:"star_off"}),this.clearTimeId(),window.ss_server.stop(n,function(e){var t=e.status;console.log(JSON.stringify({current_connect_id:n,status:t}))})),["RECONNECTING","DISCONNECTED"].includes(a)&&(this.connecting(),window.ss_server.start(n,function(t){var a=t.msg,i=t.status;console.log(JSON.stringify({current_connect_id:n,status:i})),e.props.dispatch({type:"ss_server/setState",payload:{current_connect_status:i}}),"CONNECTED"===i&&(e.setState({star_css:"star_on_2"}),e.clearTimeId()),"ERROR"===i&&window.weui.toast(a),e.clearTimeId()}))}},{key:"connecting",value:function(){var e=this;this.stop_interval=!1;var t=0;this.setState({star_css:"star_on_0"}),window.connecting_time_id&&clearInterval(window.connecting_time_id),window.connecting_time_id=setInterval(function(){if(!e.stop_interval){var n,a=++t%3;switch(a){case 0:n="..";break;case 1:n="...";break;case 2:n="."}console.log(n),e.setState({star_css:"star_on_"+a,tipTxt:"Connecting"+n})}},1400)}},{key:"onClickStar",value:function(){var e=this.props,t=e.current_connect_id,n=e.current_connect_status;console.log(t),console.log(n),console.log(Object(U.g)()),"cordova"===Object(U.g)()&&t?this.connect():this.onSelectCell({id:"vip",title:"\u6211\u7684\u7ebf\u8def"})}},{key:"clearTimeId",value:function(){this.stop_interval=!0,window.connecting_time_id&&clearInterval(window.connecting_time_id)}},{key:"componentDidMount",value:function(){"CONNECTED"===this.props.current_connect_status&&this.setState({star_css:"star_on_2"})}},{key:"componentWillUnmount",value:function(){this.clearTimeId()}},{key:"render",value:function(){var e=this,t=this.state.star_css,n="1.4em",a={line:i.a.createElement(W.h,{size:n}),instance:i.a.createElement(W.k,{size:n}),order:i.a.createElement(W.j,{size:n}),plan:i.a.createElement(W.c,{size:n}),account:i.a.createElement(W.a,{size:n})};return i.a.createElement("div",{className:"Star"},i.a.createElement("div",{className:"star_wrap"},i.a.createElement("div",{onClick:function(){e.onClickStar()}},i.a.createElement("div",{className:"star "+("cordova"===Object(U.g)()?t:"star_on_2")}))),i.a.createElement("div",null,i.a.createElement(V.Cells,null,[{title:"\u6211\u7684\u5b9e\u4f8b",id:"instance"},{title:"\u7ebf\u8def",id:"line"}].map(function(t){return i.a.createElement(V.Cell,{key:t.id,onClick:e.onSelectCell.bind(e,t),access:!0},i.a.createElement(V.CellHeader,null,a[t.id],t.title),i.a.createElement(V.CellBody,null),i.a.createElement(V.CellFooter,null))})),i.a.createElement(V.Cells,null,[{title:"Vip\u5957\u9910",id:"plan"},{title:"\u6211\u7684\u8ba2\u5355",id:"order"},{title:"\u6211\u7684\u5e10\u6237",id:"account"}].map(function(t){return i.a.createElement(V.Cell,{key:t.id,onClick:e.onSelectCell.bind(e,t),access:!0},i.a.createElement(V.CellHeader,null,a[t.id],t.title),i.a.createElement(V.CellBody,null),i.a.createElement(V.CellFooter,null))})),i.a.createElement(V.Cells,null,[].map(function(t){return i.a.createElement(V.Cell,{key:t.id,onClick:e.onSelectCell.bind(e,t),access:!0},i.a.createElement(V.CellHeader,null,a[t.id],t.title),i.a.createElement(V.CellBody,null),i.a.createElement(V.CellFooter,null))}))))}}]),t}(a.Component),be=Object(x.b)(function(e){return{instances:e.instance.items,loading:e.instance.loading,error:e.instance.error,me:e.user.me,current_connect_id:e.ss_server.current_connect_id,current_connect_status:e.ss_server.current_connect_status}})(ge),_e={index:{children:i.a.createElement(be,null)},instance:{children:i.a.createElement(Y,null)},plan:{children:i.a.createElement(ue,null)},order:{children:i.a.createElement(he,null)},account:{children:i.a.createElement(ve,null)},login:{children:i.a.createElement(ye,null)}},Ee=["admin","user"],Ce=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(R.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(i)))).state={loading:!0},n}return Object(H.a)(t,e),Object(B.a)(t,[{key:"handleUrl",value:function(e){var t=this,n=Object(U.l)(e);if(console.log(n),n.query.jwt)Object(U.m)("JWT "+n.query.jwt),this.props.dispatch({type:"app/logged",payload:{access_token:"JWT "+n.query.jwt}}),window.location.href="".concat(n.protocol,"//").concat(n.host),window.location.reload();else{var a="404",i=n.hash.replace("#","");a=0===i.length?"index":Object.keys(_e).includes(i)?i:"404",this.props.dispatch({type:"route/setState",payload:{page_id:a}});var o=Object(U.f)();o&&this.props.dispatch({type:"app/logged",payload:{access_token:o}}),0===Object.keys(window.globalObject.constant).length&&this.getConstants(),Ee.includes(a.split("/")[0])?null===o?(window.location.href="#login",window.location.reload(),this.finishLoading()):this.props.dispatch(m(function(){t.finishLoading()})):this.finishLoading()}}},{key:"finishLoading",value:function(){this.setState({loading:!1}),setTimeout(function(){document.querySelector(".global-loading").style.display="none"},700)}},{key:"getConstants",value:function(){u.a.get("/constant").then(function(e){var t=e.data,n=t.default_zone,a=t.zones,i=t.download_urls,o=t.plans,c=t.payment,l=t.zone_names;window.globalObject.constant={zones:Object(U.e)(a,l),default_zone:n,payment:c,zone_names:l,plans:o,download_urls:i}}).catch(function(){})}},{key:"componentDidMount",value:function(){var e=this;window.onpopstate=function(){var t=Object(U.l)(document.location);e.handleUrl(t)},this.handleUrl(window.location.href)}},{key:"getPageProps",value:function(e,t){var n=this.props,a=n.page,i=n.page_id;i===e&&console.log(i);var o=Object(r.a)({visible:i===e,id:e},t);return a&&a[e]?Object(r.a)({},o,a[e],t,{visible:i===e}):o}},{key:"render",value:function(){var e=this;return this.state.loading?null:i.a.createElement("div",{className:"App"},Object.keys(_e).map(function(t){return i.a.createElement(q.a,Object.assign({key:t},e.getPageProps(t,_e[t])))}))}}]),t}(a.Component),ke=Object(x.b)(function(e){e.app;var t=e.route;return{page:t.page,page_id:t.page_id,index:t.index}})(Ce);n(81),n(82),n(83);Object(D.a)();var Oe=Object(l.d)(I,Object(l.a)(P.a)),je=function(){c.a.render(i.a.createElement(x.a,{store:Oe},i.a.createElement(ke,null)),document.getElementById("root")),z.a()};window.cordova?document.addEventListener("deviceready",je,!1):je()},47:function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(2),c=n(31),l=n(37),r=(n(78),n(22)),s=n(11),u=Object(o.b)(function(e){var t=e.route;return{go_1:t.go_1,pages_history:t.pages_history}})(function(e){var t=e.children,n=e.go_1,a=e.topGlobal,o=e.className,u=e.pages_history,d=e.id,p=e.title,m=e.showHeader,h=e.visible,f=e.onClose,v=e.onConfirm,w=e.onAdd;if(!d)return null;var y=d.replace(/-/g,"_").replace(/\//g,"_"),g=Object(l.a)({topGlobal:a,page:!0,slideIn:(!h||!n)&&h,slideOut:window.page_close_id&&y===window.page_close_id});function b(e){var t=document.body;window.is_scroll_end=t.offsetHeight+t.scrollTop===t.scrollHeight,console.log(window.is_scroll_end,t.offsetHeight,t.scrollTop,t.scrollHeight)}return a&&h&&Object(s.b)(),window.document.body.onscroll=b,h?i.a.createElement(c.a,{className:o||"portal",onScroll:function(e){b()}},i.a.createElement("div",{className:g,onAnimationEnd:function(){window.page_close_id&&window.page_close_id===y&&(window.page_close_id=null,0===u.length?window.location.href="#":window.history.go(-1)),document.querySelector("#page_"+y).className=a?"topGlobal page":"page"},id:"page_"+y},m&&i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"left"},f&&i.a.createElement("div",{className:"icon",onClick:function(e){e.target;f()}},i.a.createElement(r.e,{size:"1.8em"}))),i.a.createElement("div",{className:"title"},p),i.a.createElement("div",{className:"right"},v&&i.a.createElement("div",{className:"icon",onClick:function(){v()}},i.a.createElement(r.d,{size:"1.8em"})),w&&i.a.createElement("div",{className:"icon",onClick:function(){w()}},i.a.createElement(r.b,{size:"1.8em"})))),i.a.createElement("div",{className:"body"},t,"android"===Object(s.g)()&&i.a.createElement("div",{style:{height:60}})))):null});t.a=u},62:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(20),i=n.n(a),o=n(11),c=function(){l()},l=function(){i.a.defaults.timeout=15e3,i.a.interceptors.request.use(function(e){var t=e.url,n=window.globalObject.base_api_url;return t&&0===t.indexOf("http")?e.url="".concat(t):e.url="".concat(n).concat(t),e},function(e){return console.error("request",e),Promise.reject(e)}),i.a.interceptors.response.use(function(e){return e.data&&e.data.code&&403===e.data.code?weui.alert("\u6ca1\u6709\u6743\u9650"):e},function(e){return console.error("response",e.message),e.message.indexOf("401")>0||e.response&&401===e.response.status?(localStorage.removeItem("access_token"),weui.alert("\u8bf7\u5148\u767b\u9646",function(){return Object(o.i)()})):Promise.reject(e)})}},63:function(e,t,n){"use strict";n.d(t,"a",function(){return a});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},71:function(e,t,n){},72:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){}},[[238,3,0,5]]]);
//# sourceMappingURL=gcp.chunk.js.map